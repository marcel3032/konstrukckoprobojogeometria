
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Ukážky kódov, tutoriál &#8212; KPG 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Podrobnejší popis kódu" href="code.html" />
    <link rel="prev" title="Prvý program, nastavenie IDE" href="installation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="code.html" title="Podrobnejší popis kódu"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Prvý program, nastavenie IDE"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">KPG 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ukazky-kodov-tutorial">
<h1>Ukážky kódov, tutoriál<a class="headerlink" href="#ukazky-kodov-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Tento text predpokladá, že máte rozbehané Arduino IDE, a urobené všetky veci z <a class="reference internal" href="installation.html#ide"><span class="std std-ref">Arduino IDE</span></a>.</p>
<p>V predchádzajúcom texte ste overili, že keď ťukáte na tlačítko,
ktoré ovláda port 22, tak by sa mala ledka na ESPčku zapínať a vypínať.</p>
<p>Dokopy sa Vám zobrazuje:</p>
<ul class="simple">
<li><p>Tlačítko ovládajúce port 22</p></li>
<li><p>Slider ovládajúci port 22</p></li>
<li><p>Slider s tlačítkom, ovládajúci funkciu 0</p></li>
<li><p>Tlačítko ovládajúce funkciu 0</p></li>
<li><p>Slider ovládajúci 2 porty (19 a 22)</p></li>
<li><p>Element ukazujúci aktuálny stav portu (13)</p></li>
</ul>
<p>Opíšme si teraz postupne všetky tieto veci:</p>
<div class="section" id="tlacitko-ovladajuce-port-22">
<h2>Tlačítko ovládajúce port 22<a class="headerlink" href="#tlacitko-ovladajuce-port-22" title="Permalink to this headline">¶</a></h2>
<p>V predchádzajúcom texte ste overili, že keď ťukáte na tlačítko,
ktoré ovláda port 22, tak by sa mala ledka na ESPčku zapínať a vypínať.</p>
<p>Nové tlačítko najprv musí byť pridané do poľa <code class="code docutils literal notranslate"><span class="pre">input_elements</span></code>
v <cite>index.ino</cite> dole, okolo riadku 185.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">input_elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">OutputButton</span><span class="p">(</span><span class="mi">22</span><span class="p">));</span>
</pre></div>
</div>
<p>Trieda <cite>OutputButton</cite> urobí všetko za nás, jediná vec,
ktorú jej potrebujeme dať, je port, ktorý má ovládať.</p>
</div>
<div class="section" id="slider-ovladajuci-port-22">
<h2>Slider ovládajúci port 22<a class="headerlink" href="#slider-ovladajuci-port-22" title="Permalink to this headline">¶</a></h2>
<p>Výstupnú hodnotu portu vieme ovládať aj plynule/analógovo, slidrom.</p>
<p>Ak posúvate slider, čo patrí k portu 22, tak by sa mala LEDka na ESPčku
pomaly zhasínať/zapínať.</p>
<p>Slider musí byť tiež pridaný do poľa:code:<cite>input_elements</cite>
v <cite>index.ino</cite> dole, okolo riadku 185.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">input_elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Slider</span><span class="p">(</span><span class="mi">22</span><span class="p">));</span>
</pre></div>
</div>
<p>Trieda <cite>Slider</cite> tiež urobí všetko za nás,
jediná vec, ktorú jej potrebujeme dať, je port, ktorý má ovládať.</p>
<p>(Ak už LEDku raz ovládate slidrom, do reštartu espčka ju neviete ovládať tlačítkom,
pozri <a class="reference internal" href="other.html#knownissues"><span class="std std-ref">Known issues</span></a>)</p>
</div>
<div class="section" id="slider-s-tlacitkom-ovladajuci-funkciu-0">
<h2>Slider s tlačítkom, ovládajúci funkciu 0<a class="headerlink" href="#slider-s-tlacitkom-ovladajuci-funkciu-0" title="Permalink to this headline">¶</a></h2>
<p>Okrem zapínania/vypínania portov napriamo
si vieme vyrobiť aj funkciu v ESPčku, ktorú budeme volať z mobilu.</p>
<p>Presuňte slider približne do ľavej tretiny a po stlačení tlačítka
by sa mala LEDka zasvietiť a zhasnúť.
Čím viac posuniete slider doprava, tým dlhšie bude svietiť.</p>
<p>Najprv si do poľa <code class="code docutils literal notranslate"><span class="pre">input_elements</span></code> v <cite>index.ino</cite> dole,
okolo riadku 185 pridáme triedu, ktorou budeme
volať funkciu. Napríklad si môžeme pridať triedu
<cite>SliderFunctionButton</cite>, ktorú ste dostali ako príklad.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">input_elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">SliderFunctionButton</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</pre></div>
</div>
<p>Rozoberme si, ako presne je urobená trieda <cite>SliderFunctionButton</cite>.
Jej definácia je okolo riadku 130.</p>
<p>Na jej začiatku si uložíme index do poľa funkcií, aby sme vedeli,
ktorú funkciu v ESPčku budeme volať.
Potom vyrobíme html blok, v ktorom bude tento ovládací prvok, jeho popis, slider a tlačítko.
Tlačítku tiež nastavíme text.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">SliderFunctionButton</span> <span class="p">{</span>
   <span class="nx">constructor</span><span class="p">(</span><span class="nx">function_index</span><span class="p">){</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">function_index</span> <span class="o">=</span> <span class="nx">function_index</span><span class="p">;</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;card&quot;</span><span class="p">]],</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">));</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>

     <span class="k">this</span><span class="p">.</span><span class="nx">slider</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;2000&quot;</span><span class="p">]],</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>

     <span class="k">this</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;function: &quot;</span><span class="o">+</span><span class="nx">function_index</span><span class="p">;</span>
</pre></div>
</div>
<p>Následne potrebujeme nastaviť, čo sa má stať po kliknutí na tlačítko:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">ev</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;{&quot;method&quot;: &quot;function&quot;, &quot;index&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">function_index</span><span class="o">+</span><span class="s1">&#39;, &quot;args&quot;:\&#39;{&quot;time&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="o">+</span><span class="s1">&#39;}\&#39;}&#39;</span><span class="p">)</span>
  <span class="nx">websocket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;{&quot;method&quot;: &quot;function&quot;, &quot;index&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">function_index</span><span class="o">+</span><span class="s1">&#39;, &quot;args&quot;:\&#39;{&quot;time&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="o">+</span><span class="s1">&#39;}\&#39;}&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Po stlačení tlačítka zalogujeme do javascript konzoly,
čo presne odosielame (<code class="code docutils literal notranslate"><span class="pre">console.log(...)</span></code>).
Potom toto aj odošleme do ESPčka (<code class="code docutils literal notranslate"><span class="pre">websocket.send(...)</span></code>).</p>
<p>Posielame index do poľa funkcií v ESPčku, a hodnotu slidra,
ktorú získavame ako <code class="code docutils literal notranslate"><span class="pre">this.slider.value</span></code>.</p>
<p>Pozrime sa teraz do <code class="code docutils literal notranslate"><span class="pre">handleMessage.ino</span></code>:</p>
<p>Na začiatku súboru je definícia funkcie <code class="code docutils literal notranslate"><span class="pre">doBlink</span></code>, ktorú voláme.</p>
<p>To čo robí je okomentované už aj v kóde:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">doBlink</span><span class="p">(</span><span class="n">String</span> <span class="n">args</span><span class="p">){</span>
  <span class="c1">// kvoli posielaniu argumentov na DEBUG log</span>
  <span class="c1">// nahradime uvodzovky apostrofmi</span>
  <span class="n">args</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\&#39;</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">sendDebugMessage</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">,</span> <span class="s">&quot;zavolana funkcia doBlink s argumentami: &quot;</span><span class="o">+</span><span class="n">args</span><span class="p">);</span>

  <span class="c1">// rozparsujeme argumenty</span>
  <span class="n">DynamicJsonDocument</span> <span class="n">doc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
  <span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>

  <span class="c1">// ziskame zo spravy cas, ako dlho ma LEDka svietit</span>
  <span class="kt">int</span> <span class="n">time</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">&quot;time&quot;</span><span class="p">]</span>

  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="n">time</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="n">time</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Tiež musíme túto funkciu vložiť do poľa funkcií ESPčka, ktoré chceme volať z mobilu (okolo riadku 30):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// definitions of functions, which you can call from ESP</span>
<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">functions</span><span class="p">[])(</span><span class="n">String</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="n">doBlink</span><span class="p">,</span> <span class="n">blinkOnTouch</span><span class="p">};</span>
</pre></div>
</div>
<p>Keďže sme do klienta napísali, že bude na indexe 0, tak ju sem do poľa musíme dať na tento index.</p>
<p>Zvyšok už za nás urobí funkcia <code class="code docutils literal notranslate"><span class="pre">handleMessage</span></code> (na konci súboru).
Na jej konci je, že v prípade, že správa z ESPčka hovorí o tom, že treba zavolať funkciu,
tak to urobí (zaindexuje do poľa, a zavolá ju).</p>
</div>
<div class="section" id="tlacitko-ovladajuce-funkciu-1">
<h2>Tlačítko ovládajúce funkciu 1<a class="headerlink" href="#tlacitko-ovladajuce-funkciu-1" title="Permalink to this headline">¶</a></h2>
<p>Táto funkcia ukazuje, ako môžete z mobilu zapínať niečo,
čo bude na ESP bežať, kým to nevypnete (napríklad sledovanie čiary).</p>
<p>Najprv si do poľa <code class="code docutils literal notranslate"><span class="pre">input_elements</span></code> v <cite>index.ino</cite> dole,
okolo riadku 185 pridáme triedu, ktorou budeme
volať funkciu. V našom prípade to bude trieda
<cite>BlinkFunctionButton</cite>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">input_elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">BlinkFunctionButton</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</pre></div>
</div>
<p>Definícia tejto triedy je okolo riadku 150, rozoberme si ju.
Podobne ako pri prechádzajúcej funkcii si najprv vytvoríme html elementy,
ktorými ju budeme ovládať. (Ukladáme si index funkcie, vytvárame celý element, popis, tlačítko.)</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">function_index</span> <span class="o">=</span> <span class="nx">function_index</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;card&quot;</span><span class="p">]],</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">));</span>
<span class="k">this</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>

<span class="k">this</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="nx">$e</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;function: &quot;</span><span class="o">+</span><span class="nx">function_index</span><span class="p">;</span>
</pre></div>
</div>
<p>Následne naprogramujeme, čo sa stane po stlačení tlačítka.
V tomto prípade je to pomerne priamočiare, keďže funkcia neočakáva žiadne argumenty.
To znamená, že iba zalogujeme do konzoly a odošleme do ESP.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">ev</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;{&quot;method&quot;: &quot;function&quot;, &quot;index&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">function_index</span><span class="o">+</span><span class="s1">&#39;, &quot;args&quot;:\&#39;{}\&#39;}&#39;</span><span class="p">)</span>
  <span class="nx">websocket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;{&quot;method&quot;: &quot;function&quot;, &quot;index&quot;:&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">function_index</span><span class="o">+</span><span class="s1">&#39;, &quot;args&quot;:\&#39;{}\&#39;}&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Aby sme od funkcie mali spätnú väzbu, tak naprogramujeme aj niečo do metódy <code class="code docutils literal notranslate"><span class="pre">update</span></code>.
Keďže funkcia neovláda priamo žiaden port, tak v správach chodí nejaký vymyslený,
aby sme ich vedeli správne identifikovať.
Po prijatí správy nastavíme popis podľa prijatého stavu.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">update</span><span class="p">(</span><span class="nx">recieved_data</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">recieved_data</span><span class="p">.</span><span class="nx">port</span><span class="o">==</span><span class="mi">101</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">description1</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`state: </span><span class="si">${</span><span class="nx">recieved_data</span><span class="p">.</span><span class="nx">data</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pozrime sa teraz, ako vyzerá tento kód v ESPčku.
V súbore <code class="code docutils literal notranslate"><span class="pre">handleMessage</span></code> je okolo riadku 20 funkcia, ktorú voláme.</p>
<p>Táto funkcia najprv zaloguje prijaté argumenty:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">args</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\&#39;</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">sendDebugMessage</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">,</span> <span class="s">&quot;zavolana funkcia doBlink s argumentami: &quot;</span><span class="o">+</span><span class="n">args</span><span class="p">);</span>
</pre></div>
</div>
<p>A nastaví globálnu premennú, na jej opačnú hodnotu
(ak bola pred tým <cite>true</cite>, teraz bude <cite>false</cite> a opačne).
Nakoniec zalogujeme nastavenú hodnotu s vymysleným portom (rovnakým, ako je v metóde <code class="code docutils literal notranslate"><span class="pre">update</span></code>).</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="kt">bool</span> <span class="n">blinking</span><span class="p">;</span>
<span class="n">blinking</span> <span class="o">=</span> <span class="o">!</span><span class="n">blinking</span><span class="p">;</span>
<span class="n">notifyClientsMessage</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="n">blinking</span><span class="p">);</span>
</pre></div>
</div>
<p>Premenná <code class="code docutils literal notranslate"><span class="pre">blinking</span></code>, je v definovaná v súbore <code class="code docutils literal notranslate"><span class="pre">performLoop.ino</span></code>,
a vždy, keď sa spustí funkcia <code class="code docutils literal notranslate"><span class="pre">performLoop</span></code>, tak si program overí,
či je premenná nastavená na <cite>true</cite>, a ak áno, tak na výstup 22 (vstavaná LEDka) zapíše hodnotu,
ktorá bola prečítaná na porte 13.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">blinking</span><span class="p">){</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">digitalRead</span><span class="p">(</span><span class="mi">13</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To znamená, že prípade, že zapnete túto funkciu, tak v prípade,
že káblom prepojíte zem (port <code class="code docutils literal notranslate"><span class="pre">G</span></code>) a port 13, tak sa vstavaná LEDka rozsvieti,
inak ostane zhasnutá.</p>
</div>
<div class="section" id="slider-ovladajuci-2-porty-19-a-22">
<h2>Slider ovládajúci 2 porty (19 a 22)<a class="headerlink" href="#slider-ovladajuci-2-porty-19-a-22" title="Permalink to this headline">¶</a></h2>
<p>Ako sme už písali v <a class="reference internal" href="components.html#suciastky"><span class="std std-ref">Súčiastky</span></a>, motor je ovládaný dvomi pinmi.
Najjednoduchší spôsob, ako ho ovládať, je použíť hotovú triedu <code class="code docutils literal notranslate"><span class="pre">MotorSlider</span></code>.</p>
<p>Klasicky slider pridáte do poľa:code:<cite>input_elements</cite>
v <cite>index.ino</cite> dole, okolo riadku 185.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">input_elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">MotorSlider</span><span class="p">(</span><span class="mi">22</span><span class="p">));</span>
</pre></div>
</div>
<p>Trieda <cite>MotorSlider</cite> tiež urobí všetko za nás,
jediná vec, ktorú jej potrebujeme dať, sú dva porty, kde sú zapojené motory.</p>
</div>
<div class="section" id="element-ukazujuci-aktualny-stav-portu-13">
<h2>Element ukazujúci aktuálny stav portu (13)<a class="headerlink" href="#element-ukazujuci-aktualny-stav-portu-13" title="Permalink to this headline">¶</a></h2>
<p>Slider treba pridať do poľa <code class="code docutils literal notranslate"><span class="pre">port_inputs</span></code>
v <cite>index.ino</cite> dole, okolo riadku 190.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">port_inputs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">PortInput</span><span class="p">(</span><span class="mi">13</span><span class="p">));</span>
</pre></div>
</div>
<p>Trieda <cite>PortInput</cite> opäť urobí všetko za nás,
jediná vec, ktorú jej potrebujeme dať, je port, ktorý chceme sledovať.</p>
<p>Okrem úprav v javascripte treba tento port pridať aj do kódu k ESPčku.
V súbore <code class="code docutils literal notranslate"><span class="pre">checkInputs</span></code> je úplne na vrchu pole, v ktorom sú napísané všetky porty,
ktoré ESPčko sleduje a posiela do mobilu:</p>
<p>Do tohoto poľa treba napísať všetky porty, ktoré má ESPčko sledovať.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Ukážky kódov, tutoriál</a><ul>
<li><a class="reference internal" href="#tlacitko-ovladajuce-port-22">Tlačítko ovládajúce port 22</a></li>
<li><a class="reference internal" href="#slider-ovladajuci-port-22">Slider ovládajúci port 22</a></li>
<li><a class="reference internal" href="#slider-s-tlacitkom-ovladajuci-funkciu-0">Slider s tlačítkom, ovládajúci funkciu 0</a></li>
<li><a class="reference internal" href="#tlacitko-ovladajuce-funkciu-1">Tlačítko ovládajúce funkciu 1</a></li>
<li><a class="reference internal" href="#slider-ovladajuci-2-porty-19-a-22">Slider ovládajúci 2 porty (19 a 22)</a></li>
<li><a class="reference internal" href="#element-ukazujuci-aktualny-stav-portu-13">Element ukazujúci aktuálny stav portu (13)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Prvý program, nastavenie IDE</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="code.html"
                        title="next chapter">Podrobnejší popis kódu</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="code.html" title="Podrobnejší popis kódu"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Prvý program, nastavenie IDE"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">KPG 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Trojsten.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>